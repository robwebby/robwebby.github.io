setwd(mydir)
GE_2010 <- read.csv("GE2010_Results.csv")
setwd("~/Documents/Leicester Uni/2017 Election Play/Election 2017")
GE_2010 <- read.csv("GE2010_Results.csv")
Constituencies_WGS <- spTransform(Constituencies,latlong)
latlong = "+init=epsg:4326"
Constituencies_WGS <- spTransform(Constituencies,latlong)
Constituencies_WGS <- ms_simplify(Constituencies_WGS,keep = 0.001,keep_shapes = TRUE)
library(rmapshaper)
Constituencies_WGS <- ms_simplify(Constituencies_WGS,keep = 0.001,keep_shapes = TRUE)
writeOGR(Constituencies_WGS,mydir,driver="ESRI Shapefile")
mydir <- c("/Users/robwebster/Documents/GitHub/robwebby.github.io")
setwd(mydir)
writeOGR(Constituencies_WGS,mydir,driver="ESRI Shapefile")
writeOGR(obj = Constituencies_WGS,mydir,driver="ESRI Shapefile")
writeOGR(obj = Constituencies_WGS, dsn = "mydir", driver = "ESRI Shapefile")
writeOGR(Constituencies_WGS,driver = "ESRI Shapefile")
writeOGR(Constituencies_WGS,dsn = mydir,driver = "ESRI Shapefile")
writeOGR(obj=Constituencies_WGS,dsn = "mydir", layer = Constituencies_WGS,driver = "ESRI Shapefile")
?writeOGR
writeOGR(Constituencies_WGS, mydir,"Constituencies_Simp",driver="ESRI Shapefile")
Constituencies <- readOGR("Constituencies_Simp.shp")
GE_2010 <- read.csv("GE2010_Results.csv")
setwd("~/Documents/Leicester Uni/2017 Election Play/Election 2017")
setwd("~/Documents/Leicester Uni/2017 Election Play/Election 2017")
mydir <- c("/Users/robwebster/Documents/GitHub/robwebby.github.io")
setwd(mydir)
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.15,GE2017_WGS$SNP.Vote.Share.15,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(Combo_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06)
GE2017_Leaflet
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE)
)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE)
)
GE2017_Leaflet
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.15,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE_2017 <- read.csv("GE2017_Results.csv")
View(GE_2017)
GE_2017 <- read.csv("GE2017_Results.csv")
View(GE_2017)
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
library(htmlwidgets)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
GE2017_Leaflet
?addLegend
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
na.label = "Not Called",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
GE2017_Leaflet
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "0.2px 0.1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
library(sp)
library(rgdal)
library(raster)
library(plyr)
library(rgeos)
library(leaflet)
library(rmapshaper)
library(htmlwidgets)
mydir <- c("/Users/robwebster/Documents/GitHub/robwebby.github.io")
setwd(mydir)
Constituencies <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies_WGS,GE_2017, by = "CODE")
Constituencies <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2017_WGS$Winner.17)
labelelec2017 <- sprintf(
"<strong>%s 2015 </strong><br/> Lab Vote Share <strong> %g </strong> <br /> Con Vote Share <strong> %g </strong> <br />Lib Dem Vote Share <strong> %g </strong> <br />UKIP Vote Share <strong> %g </strong> <br />SNP Vote Share <strong> %g </strong> <br />Green Vote Share <strong> %g </strong> <br />Other Vote Share <strong> %g </strong> <br />", GE2017_WGS$NAME,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
saveWidget(GE2017_Leaflet,file = "Election_2017.html")
