highlight = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Winner")
) %>%
addPolygons(data = GE2015_WGSb,stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec15pal2(Second.Place.15),
highlight = highlightOptions(
weight = 2,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015b,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Runner Up"),
) %>% addLayersControl(
baseGroups = c("Winner", "Runner Up"),
options = layersControlOptions(collapsed = TRUE))
GE2015_Leaflet
library(rgdal)
library(leaflet)
library(htmltools)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_Leaflet
library(rgdal)
library(leaflet)
library(htmltools)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2015 <- read.csv("GE2015_Results.csv")
GE2015_WGS <- merge(Constituencies,GE_2015, by = "CODE")
Elec15pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2015 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>) </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>)</strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Green Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Other Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />", GE2015_WGS$Constituency.Name,GE2015_WGS$Winner.15,GE2015_WGS$Labour.Vote.Share.15,GE2015_WGS$Labour.Vote.Share.Change.15,GE2015_WGS$Conservative.Vote.Share.15,GE2015_WGS$Conservative.Vote.Share.Change.15,GE2015_WGS$Lib.Dems.Vote.Share.15,GE2015_WGS$Lib.Dems.Vote.Share.Change.15,GE2015_WGS$UKIP.Vote.Share.15,GE2015_WGS$UKIP.Vote.Share.Change.15,GE2015_WGS$SNP.Vote.Share.15,GE2015_WGS$SNP.Vote.Share.Change.15,GE2015_WGS$Green.Vote.Share.15,GE2015_WGS$Green.Vote.Share.Change.15,GE2015_WGS$Other.Vote.Share.15,GE2015_WGS$Other.Vote.Share.Change.15
) %>% lapply(htmltools::HTML)
GE2015_Leaflet <- leaflet(GE2015_WGS) %>%
fitBounds(-10.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec15pal(Winner.15),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 15")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.15,
title = "Winner GE 2015",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2015_Leaflet
GE2015_Leaflet <- leaflet(GE2015_WGS) %>%
fitBounds(-10.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec15pal(Winner.15),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 15")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.15,
title = "Winner GE 2015",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2015_Leaflet
library(rgdal)
library(leaflet)
library(htmltools)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2015 <- read.csv("GE2015_Results.csv")
GE2015_WGS <- merge(Constituencies,GE_2015, by = "CODE")
Elec15pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2015 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>) </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>)</strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Green Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Other Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />", GE2015_WGS$Constituency.Name,GE2015_WGS$Winner.15,GE2015_WGS$Labour.Vote.Share.15,GE2015_WGS$Labour.Vote.Share.Change.15,GE2015_WGS$Conservative.Vote.Share.15,GE2015_WGS$Conservative.Vote.Share.Change.15,GE2015_WGS$Lib.Dems.Vote.Share.15,GE2015_WGS$Lib.Dems.Vote.Share.Change.15,GE2015_WGS$UKIP.Vote.Share.15,GE2015_WGS$UKIP.Vote.Share.Change.15,GE2015_WGS$SNP.Vote.Share.15,GE2015_WGS$SNP.Vote.Share.Change.15,GE2015_WGS$Green.Vote.Share.15,GE2015_WGS$Green.Vote.Share.Change.15,GE2015_WGS$Other.Vote.Share.15,GE2015_WGS$Other.Vote.Share.Change.15
) %>% lapply(htmltools::HTML)
GE2015_Leaflet <- leaflet(GE2015_WGS) %>%
fitBounds(-10.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec15pal(Winner.15),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 15")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.15,
title = "Winner GE 2015",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2015_Leaflet,file = "Election_2015_Cartogram.html")
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2015 <- read.csv("GE2015_Results.csv")
GE2015_WGS <- merge(Constituencies,GE_2015, by = "CODE")
Elec15pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2015 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>) </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  (%g<span>&#37;</span>)</strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Green Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />Other Vote Share <strong> %g<span>&#37;</span> (%g<span>&#37;</span>) </strong> <br />", GE2015_WGS$Constituency.Name,GE2015_WGS$Winner.15,GE2015_WGS$Labour.Vote.Share.15,GE2015_WGS$Labour.Vote.Share.Change.15,GE2015_WGS$Conservative.Vote.Share.15,GE2015_WGS$Conservative.Vote.Share.Change.15,GE2015_WGS$Lib.Dems.Vote.Share.15,GE2015_WGS$Lib.Dems.Vote.Share.Change.15,GE2015_WGS$UKIP.Vote.Share.15,GE2015_WGS$UKIP.Vote.Share.Change.15,GE2015_WGS$SNP.Vote.Share.15,GE2015_WGS$SNP.Vote.Share.Change.15,GE2015_WGS$Green.Vote.Share.15,GE2015_WGS$Green.Vote.Share.Change.15,GE2015_WGS$Other.Vote.Share.15,GE2015_WGS$Other.Vote.Share.Change.15
) %>% lapply(htmltools::HTML)
GE2015_Leaflet <- leaflet(GE2015_WGS) %>%
fitBounds(-10.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec15pal(Winner.15),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2015,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 15")
) %>% addLegend("bottomright", pal = Elec15pal, values = ~Winner.15,
title = "Winner GE 2015",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2015_Leaflet,file = "Election_2015_Cartogram.html")
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017_Cartogram.html")
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
GE_2010 <- read.csv("GE2010_Results.csv")
GE2010_WGS <- merge(Constituencies,GE_2010, by = "CODE")
Elec10pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2010 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2010_WGS$Constituency.Name,GE2010_WGS$Winner.10,GE2010_WGS$Labour.Vote.Share.10,GE2010_WGS$Conservative.Vote.Share.10,GE2010_WGS$Lib.Dems.Vote.Share.10,GE2010_WGS$UKIP.Vote.Share.10,GE2010_WGS$SNP.Vote.Share.10,GE2010_WGS$Green.Vote.Share.10,GE2010_WGS$Other.Vote.Share.10
) %>% lapply(htmltools::HTML)
GE2010_Leaflet <- leaflet(GE2010_WGS) %>%
fitBounds(-10.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec10pal(Winner.10),
highlight = highlightOptions(
weight = 5,
color = "#666",
dashArray = "",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2010,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 10")
) %>% addLegend("bottomright", pal = Elec10pal, values = ~Winner.10,
title = "Winner GE 2010",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2010_Leaflet,file = "Election_2010_Cartogram.html")
Constituencies_Ac <- readOGR("Constituencies_Simp.shp")
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
Constituencies_Ac <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
GE2017_WGSAC <- merge(Constituencies_Ac,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
Elec17palAC <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGSAC$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
labelelec2017AC <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGSAC$Constituency.Name,GE2017_WGSAC$Winner.17,GE2017_WGSAC$Labour.Vote.Share.17,GE2017_WGSAC$Conservative.Vote.Share.17,GE2017_WGSAC$Lib.Dems.Vote.Share.17,GE2017_WGSAC$UKIP.Vote.Share.17,GE2017_WGSAC$SNP.Vote.Share.17,GE2017_WGSAC$Green.Vote.Share.17,GE2017_WGSAC$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC <- leaflet(GE2017_WGSAC) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17palAC(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017AC,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17palAC, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017_Cartogram.html")
saveWidget(GE2017_LeafletAC,file = "Election_2017.html")
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
Constituencies_Ac <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
GE2017_WGSAC <- merge(Constituencies_Ac,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
Elec17palAC <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGSAC$Winner.15)
GE2017_WGSAC <- merge(Constituencies_Ac,GE_2017, by = "CODE")
Elec17palAC <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
labelelec2017AC <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGSAC$Constituency.Name,GE2017_WGSAC$Winner.17,GE2017_WGSAC$Labour.Vote.Share.17,GE2017_WGSAC$Conservative.Vote.Share.17,GE2017_WGSAC$Lib.Dems.Vote.Share.17,GE2017_WGSAC$UKIP.Vote.Share.17,GE2017_WGSAC$SNP.Vote.Share.17,GE2017_WGSAC$Green.Vote.Share.17,GE2017_WGSAC$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC <- leaflet(GE2017_WGSAC) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17palAC(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017AC,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17palAC, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC
GE2017_Leaflet
GE2017_LeafletAC <- leaflet(GE2017_WGSAC) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17palAC(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017AC,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17palAC, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC
saveWidget(GE2017_Leaflet,file = "Election_2017_Cartogram.html")
saveWidget(GE2017_LeafletAC,file = "Election_2017.html")
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
Constituencies_Ac <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
GE2017_WGSAC <- merge(Constituencies_Ac,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
Elec17palAC <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
labelelec2017AC <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGSAC$Constituency.Name,GE2017_WGSAC$Winner.17,GE2017_WGSAC$Labour.Vote.Share.17,GE2017_WGSAC$Conservative.Vote.Share.17,GE2017_WGSAC$Lib.Dems.Vote.Share.17,GE2017_WGSAC$UKIP.Vote.Share.17,GE2017_WGSAC$SNP.Vote.Share.17,GE2017_WGSAC$Green.Vote.Share.17,GE2017_WGSAC$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC <- leaflet(GE2017_WGSAC) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17palAC(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017AC,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17palAC, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017_Cartogram.html")
saveWidget(GE2017_LeafletAC,file = "Election_2017.html")
source(2015_CartographyCode.R)
source("2015_CartographyCode.R")
?source
library(rgdal)
library(leaflet)
library(htmltools)
library(htmlwidgets)
setwd("/Users/robwebster/Documents/GitHub/robwebby.github.io")
Constituencies <- readOGR("Cartogram_GE.shp")
Constituencies_Ac <- readOGR("Constituencies_Simp.shp")
GE_2017 <- read.csv("GE2017_Results.csv")
GE_2017$Winner.17 <- gsub('#N/A', 'No Result', GE_2017$Winner.17)
GE2017_WGS <- merge(Constituencies,GE_2017, by = "CODE")
GE2017_WGSAC <- merge(Constituencies_Ac,GE_2017, by = "CODE")
Elec17pal <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
Elec17palAC <- colorFactor(c("darkblue","chartreuse","firebrick2","goldenrod3","dimgrey","darkgreen","gold","darkorchid1"), GE2015_WGS$Winner.15)
labelelec2017 <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGS$Constituency.Name,GE2017_WGS$Winner.17,GE2017_WGS$Labour.Vote.Share.17,GE2017_WGS$Conservative.Vote.Share.17,GE2017_WGS$Lib.Dems.Vote.Share.17,GE2017_WGS$UKIP.Vote.Share.17,GE2017_WGS$SNP.Vote.Share.17,GE2017_WGS$Green.Vote.Share.17,GE2017_WGS$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
labelelec2017AC <- sprintf(
"<strong>%s</strong><br/>Winner: <strong>%s</strong><br/> Lab Vote Share <strong> %g<span>&#37;</span>   </strong> <br /> Con Vote Share <strong> %g<span>&#37;</span>   </strong> <br />Lib Dem Vote Share <strong> %g<span>&#37;</span>  </strong> <br />UKIP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />SNP Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Green Vote Share <strong> %g<span>&#37;</span>  </strong> <br />Other Vote Share <strong> %g<span>&#37;</span>  </strong> <br />", GE2017_WGSAC$Constituency.Name,GE2017_WGSAC$Winner.17,GE2017_WGSAC$Labour.Vote.Share.17,GE2017_WGSAC$Conservative.Vote.Share.17,GE2017_WGSAC$Lib.Dems.Vote.Share.17,GE2017_WGSAC$UKIP.Vote.Share.17,GE2017_WGSAC$SNP.Vote.Share.17,GE2017_WGSAC$Green.Vote.Share.17,GE2017_WGSAC$Other.Vote.Share.17
) %>% lapply(htmltools::HTML)
GE2017_Leaflet <- leaflet(GE2017_WGS) %>%
fitBounds(-17.02,49.67,2.09,58.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17pal(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17pal, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
GE2017_LeafletAC <- leaflet(GE2017_WGSAC) %>%
addTiles(group = "OSM (default)") %>%
fitBounds(-14.02,49.67,2.09,61.06) %>%
addPolygons(stroke = FALSE, smoothFactor = 0.2, fillOpacity = 1,
color = ~Elec17palAC(Winner.17),
highlight = highlightOptions(
weight = 5,
color = "#666",
fillOpacity = 0.7,
bringToFront = TRUE),
label = labelelec2017AC,
labelOptions = labelOptions(
style = list("font-weight" = "normal", padding = "1px 1px"),
textsize = "9px",
direction = "auto", group = "Election 17")
) %>% addLegend("bottomright", pal = Elec17palAC, values = ~Winner.17,
title = "Winner GE 2017",
labFormat = labelFormat(prefix = ""),
opacity = 1)
saveWidget(GE2017_Leaflet,file = "Election_2017_Cartogram.html")
saveWidget(GE2017_LeafletAC,file = "Election_2017.html")
